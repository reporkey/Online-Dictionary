package server;
import java.io.*;
import java.net.*;
import org.json.*;

import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
public class Server {
	
	// Declare the port number
	private static int port = 8080;
	
	// Identifies the user number connected
	private static int counter = 0;
	
	private static byte[] receiveData = new byte[1024];
    private static byte[] sendData = new byte[1024];

	public static void main(String[] args) throws IOException {
//		DatagramSocket serverSocket = new DatagramSocket(port);
		// Wait for connections.
        System.out.println("Waiting for connections");
        genJSON("hello", "how to call something");
//		while(true){
//			
//			DatagramPacket receivePacket = new DatagramPacket( receiveData, receiveData.length);
//            serverSocket.receive(receivePacket);
//            InetAddress IPAddress = receivePacket.getAddress();
//            int clientPort = receivePacket.getPort();
//            String sentence = new String(receiveData);
//            System.out.println("RECEIVED: " + sentence);
//            
//            String capitalizedSentence = sentence.toUpperCase();
//            sendData = capitalizedSentence.getBytes();
//            DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, clientPort);
//            serverSocket.send(sendPacket);		
//		}
	}
	
	public static void genJSON(String word, String meaning) {
		JSONObject obj = new JSONObject();

	    obj.put("word", word);
	    obj.put("meaning", meaning);
	    
	    System.out.print(obj);
	    
		JSONObject data = new JSONObject();
		data.put("obj", word);
		data.put("MD5", genMD5(obj));
		
//	    deJSON(data);
	}
//	public static void deJSON(JSONObject obj) {
//		String word = obj.getString("word");
//		String meaning = obj.getString("meaning");
//		System.out.print("word = " + word);
//		System.out.print("meaning = " + meaning);
//	}
	public static byte[] genMD5(JSONObject obj) {
		byte[] objByte = obj.toString().getBytes();
		byte[] thedigest = null;
		System.out.print(objByte);
//		try {
//			MessageDigest md = MessageDigest.getInstance("MD5");
//			md.update(obj.getBytes());
//			thedigest = md.digest(objByte);
//			System.out.print(thedigest);
//		} catch (NoSuchAlgorithmException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		}
		
		return thedigest;
	}

	public boolean valMD5() {
		return false;
		
	}
	
}